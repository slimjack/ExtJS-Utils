Ext.abstractFn=function(n){var t=function(){var i=t.$name,r=t.caller.$name;if(i!==r&&r!=="callParent"){var u=t.caller.$owner.$className,f=u?u+"."+i:i,e=Ext.String.format(n||"Method '{0}' is abstract and can't be called.",f);Ext.Error.raise(e)}};return t};Ext.createIdleThrottled=function(n,t){var i=!1,r=function(){i=!1;t=t||this;t.isDestroyed||n.apply(t,arguments)};return function(){i||(i=!0,r.apply(this,arguments))}};Ext.define("Ext.ux.util.Lookup",{statics:{fromArray:function(n,t,i){var r=new Ext.ux.util.Lookup;return i=i||function(n){return n},Ext.Array.forEach(n,function(n){r.add(t(n),i(n))}),r}},constructor:function(n){var t=this;t.map={};n&&n.each(function(n,i){t.add(i,n)})},add:function(n,t){var i=this;i.map[n]||(i.map[n]=[]);i.map[n].push(t)},remove:function(n,t){var i=this,r;i.map[n]&&(Ext.isArray(t)&&(r=t,t=Ext.Array.findBy(i.map[n],r)),Ext.Array.remove(i.map[n],t))},contains:function(n,t){var i=this;return i.map[n]?Ext.Array.contains(i.map[n],t):!1},find:function(n,t){var i=this;if(i.map[n])return Ext.Array.findBy(i.map[n],t)},removeAll:function(){var n=this;n.map={}},removeKey:function(n){var t=this;t.map[n]&&delete t.map[n]},get:function(n){var t=this;return t.map[n]},clear:function(){var n=this;n.map={}},clone:function(){var n=this;return new Ext.ux.util.Lookup(n)},each:function(n,t){var r=this,i;Ext.Object.each(r.map,function(r,u){return Ext.Array.each(u,function(u){return i=n.call(t,u,r)}),i})},eachForKey:function(n,t,i){var r=this;r.map[n]&&Ext.Array.each(r.map[n],function(n){return t.call(i,n)})},eachKey:function(n,t){var i=this;Ext.Object.each(i.map,function(i,r){return n.call(t,i,r)})}});Ext.define("Ext.ux.util.DynamicComponentQuery",{alternateClassName:"DynamicComponentQuery",_defaultMethods:["disable","enable","setReadOnly","setDisabled"],_defaultEvents:[],mixins:["Ext.util.Observable"],constructor:function(n,t,i){var r=this,u;n instanceof Ext.Component&&(n={view:n,query:t,excludeQuery:i});Ext.apply(this,n);this.mixins.observable.constructor.call(this,n);r.query||Ext.Error.raise('"query" is not specified');r.view||Ext.Error.raise('"view" is not specified');r.view instanceof Ext.AbstractComponent||Ext.Error.raise('"view" is not an instance of Ext.AbstractComponent');r._everyDelegates=[];r._everyRemovedDelegates=[];r._eventRelayers={};r._events=Ext.Array.union(r._defaultEvents,Ext.Array.from(r.events));delete r.events;r.relayComponentsEvents();u=Ext.Array.union(r._defaultMethods,Ext.Array.from(r.methods));delete r.methods;r.createProxyMethods(u);r.view.on("destroy",r.onViewDestroyed,r);r.subscribeOnLayoutChange()},onViewDestroyed:function(){var n=this;n.destroy()},destroy:function(){var n=this;n._isDestroyed=!0;n._everyDelegates=[];n._everyRemovedDelegates=[];Ext.Object.eachValue(n._eventRelayers,function(n){Ext.destroy(n)});n._eventRelayers={};n.clearListeners();n.callParent(arguments)},each:function(n){var t=this;Ext.Array.forEach(t.select(),n)},contains:function(n){var t=this;return Ext.Array.contains(t.select(),n)},isEmpty:function(){var n=this;return!n.select().length},invoke:function(n){var i=this,r=Array.prototype.slice.call(arguments,1),t=null;return Ext.Array.each(i.select(),function(i){t=i[n].apply(i,r)}),t},every:function(n){var t=this;Ext.Array.include(t._everyDelegates,n);t.each(n)},everyRemoved:function(n){var t=this;Ext.Array.include(t._everyRemovedDelegates,n)},relayComponentsEvents:function(){var n=this;n.every(function(t){n._eventRelayers[t.id]=n.relayEvents(t,n._events)});n.everyRemoved(function(t){Ext.destroy(n._eventRelayers[t.id]);delete n._eventRelayers[t.id]})},createProxyMethods:function(n){var t=this;Ext.Array.forEach(n,function(n){t[n]||(t[n]=Ext.bind(t.invoke,t,[n],0))})},select:function(){var n=this;return n._selectedComponents||(n._selectedComponents=n.view.query(n.query),n.excludeQuery&&(n._selectedComponents=Ext.Array.difference(n._selectedComponents,n.view.query(n.excludeQuery)))),n._selectedComponents},subscribeOnLayoutChange:function(){var n=this,t;n.onAddComponentIdleThrottled||(n.onAddComponentIdleThrottled=Ext.createIdleThrottled(n.onAddComponent));n.onRemoveComponentIdleThrottled||(n.onRemoveComponentIdleThrottled=Ext.createIdleThrottled(n.onRemoveComponent));n.view.isContainer&&(t=n.view.query("[isContainer]"),t.push(n.view),Ext.Array.forEach(t,function(t){t.on("add",n.onAddComponentIdleThrottled,n);t.on("remove",n.onRemoveComponentIdleThrottled,n)}))},onAddComponent:function(){var n=this,i,r,t;n.subscribeOnLayoutChange();i=n._selectedComponents;n._selectedComponents=null;r=n.select();t=Ext.Array.difference(r,i);t.length&&(n.applyEvery(t),n.fireEvent("componentsadd",t))},onRemoveComponent:function(){var n=this,r=n._selectedComponents,i,t;n._selectedComponents=null;i=n.select();t=Ext.Array.difference(r,i);t.length&&(n.applyEveryRemoved(t),n.fireEvent("componentsremove",t))},applyEvery:function(n){var t=this;Ext.Array.forEach(t._everyDelegates,function(t){Ext.Array.forEach(n,t)})},applyEveryRemoved:function(n){var t=this;Ext.Array.forEach(t._everyRemovedDelegates,function(t){Ext.Array.forEach(n,t)})}});Ext.define("Ext.ux.util.DynamicViewController",{extend:"Deft.mvc.ViewController",dynamicControl:{allFields:{selector:"[isFormField]:not([excludeForm])",excludeQuery:"[isFormField] [isFormField], [controller] [isFormField]",methods:["validate"]}},control:{"#":{boxready:"onViewBoxReady"}},dynamicLayoutContainerSelector:"",config:{readOnly:!1},constructor:function(){var n=this;n.callParent(arguments)},init:function(){var n=this,t=n.callParent();n.onInit();n.onInitAsync(function(){n.onAfterInitAsync()});return n.applyDynamicControl(),t},onViewBoxReady:function(){var n=this;n.isViewReady=!0;n.onViewReady();n.onViewReadyAsync(function(){n.onAfterViewReadyAsync()})},onViewReady:Ext.emptyFn,onAfterViewReadyAsync:Ext.emptyFn,onViewReadyAsync:function(n){var t=this;n()},onInit:function(){var n=this;n.onAfterInit()},afterRender:function(){var n=this;n.rendered=!0;n.onUpdateViewState()},onAfterInit:Ext.emptyFn,onInitAsync:function(n){var t=this;n()},onAfterInitAsync:Ext.emptyFn,applyLayout:function(n){var t=this,i,r;n&&(i=t.getView(),r=t.dynamicLayoutContainerSelector?i.query(t.dynamicLayoutContainerSelector)[0]:i,Ext.suspendLayouts(),t.onBeforeApplyLayout(),r.removeAll(),r.add(n),t.onAfterApplyLayout(),Ext.resumeLayouts(!0))},onBeforeApplyLayout:Ext.emptyFn,onAfterApplyLayout:function(){var n=this;n.onUpdateViewState()},onUpdateViewState:function(){var n=this;n.allFields.setReadOnly(n.getReadOnly())},finalizeEditing:function(){var n=this;n.getView().isVisible()&&n.getView().getEl().focus()},updateReadOnly:function(){var n=this;n.isViewReady&&n.onUpdateViewState()},applyDynamicControl:function(){var n=this;Ext.Object.each(n.dynamicControl,function(t,i){if(!n[t]){var u=null,r=Ext.clone(i.listeners);if(r&&(u=Ext.Object.getKeys(r)),n[t]=new DynamicComponentQuery({view:n.getView(),query:i.selector||i.query,excludeQuery:i.excludeQuery,methods:i.methods,events:u}),r){r.scope=r.scope||n;n[t].on(r)}}})},statics:{initDynamicControlSection:function(n,t,i){var r={},u,f;i.dynamicControl&&(u=i.dynamicControl,delete i.dynamicControl,r=Ext.merge(r,u));n.dynamicControl&&(f=n.dynamicControl,delete n.dynamicControl,r=Ext.merge(r,f));t.dynamicControl=i.dynamicControl=r}}},function(){var n=this;n.onExtended(function(t,i){var r=t.prototype;n.initDynamicControlSection(i,t,r)})});Ext.define("Ext.ux.plugin.ExternalValidating",{alias:"plugin.externalvalidating",extend:"Ext.AbstractPlugin",init:function(n){var f=this,u={},r=!1,t,i;if(n.isFormField||Ext.Error.raise("ExternalValidating plugin may be applied only to form fields"),Ext.isString(n.valuePublishEvent))n.un(n.valuePublishEvent,n.publishValue,n);else for(t=0,i=n.valuePublishEvent.length;t<i;++t)n.un(n.valuePublishEvent[t],n.publishValue,n);if(Ext.override(n,{publishValue:function(){var n=this;n.rendered&&!n.getInternalErrors().length&&n.publishState("value",n.getValue())},getErrors:function(){var n=this.callParent(arguments);return r||Ext.Object.each(u,function(t,i){n=n.concat(i)}),n},getInternalErrors:function(){r=!0;var n=this.getErrors();return r=!1,n},setExternalErrors:function(t,i){u[t]=i||[];n.validate()}}),Ext.isString(n.valuePublishEvent))n.on(n.valuePublishEvent,n.publishValue,n);else for(t=0,i=n.valuePublishEvent.length;t<i;++t)n.on(n.valuePublishEvent[t],n.publishValue,n)}});Ext.define("Ext.ux.plugin.GridStoreReconfiguring",{alias:"plugin.gridstorereconfiguring",extend:"Ext.AbstractPlugin",init:function(n){var r=this,t,i;n instanceof Ext.grid.Panel||Ext.Error.raise("GridStoreReconfiguring plugin may be applied only to grid");t=new DynamicComponentQuery({view:n,query:"pagingtoolbar",methods:"bindStore"});i=n.store;t.bindStore(i);t.on("componentsadd",function(n){Ext.Array.each(n,function(n){n.bindStore(i)})});n.on("reconfigure",function(n,r,u,f){r!==f&&(i=r,t.bindStore(r))})}});Ext.define("Ext.ux.util.TextCasings",{alternateClassName:"TextCasings",statics:{upper:"upper",mixed:"mixed",lower:"lower"}});Ext.define("Ext.ux.util.FieldCasing",{alias:"plugin.fieldcasing",extend:"Ext.AbstractPlugin",toUpperCase:!0,init:function(n){var t=this;t.addFieldCasing(n)},addFieldCasing:function(n){var i=this,t=n.fieldStyle?n.fieldStyle+";":"";Ext.override(n,{setCasing:function(i){this.casing=i;this.casing===TextCasings.upper?n.setFieldStyle(t+"text-transform:uppercase"):this.casing===TextCasings.lower?n.setFieldStyle(t+"text-transform:lowercase"):n.setFieldStyle(t)},getRawValue:function(){return this.rawValue=this.callParent(arguments),this.casing===TextCasings.upper?this.rawValue=this.rawValue.toUpperCase():this.casing===TextCasings.lower&&(this.rawValue=this.rawValue.toLowerCase()),this.rawValue}});n.setCasing(n.casing)}});Ext.define("Ext.ux.plugin.ReadOnlyLatching",{alias:"plugin.readonlylatching",extend:"Ext.AbstractPlugin",init:function(n){var r=this,i=!1,t=!1;n.isFormField||Ext.Error.raise("ReadOnlyLatching plugin may be applied only to form fields");Ext.override(n,{setReadOnly:function(n){i||this.callParent(arguments);t=n},latchReadOnly:function(){var r=t;n.setReadOnly(!0);i=!0;t=r},unlatchReadOnly:function(){i=!1;n.setReadOnly(t)}})}});